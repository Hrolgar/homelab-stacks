groups:
- name: prometheus
  rules:
  - alert: PrometheusDown
    expr: up{job="prometheus"} == 0
    for: 2m
    labels:
      severity: critical
    annotations:
      summary: "Prometheus down"
      description: "No scrape data for Prometheus for 2m."

  - alert: AlertmanagerDown
    expr: up{job="alertmanager"} == 0
    for: 2m
    labels:
      severity: critical
    annotations:
      summary: "Alertmanager down"
      description: "Alertmanager instance {{ $labels.instance }} is unreachable."

  - alert: GrafanaDown
    expr: up{job="grafana"} == 0
    for: 2m
    labels:
      severity: warning
    annotations:
      summary: "Grafana down"
      description: "Grafana instance {{ $labels.instance }} is unreachable."

  - alert: CAdvisorDown
    expr: up{job="cadvisor"} == 0
    for: 2m
    labels:
      severity: warning
    annotations:
      summary: "cAdvisor down"
      description: "cAdvisor instance {{ $labels.instance }} is unreachable. Container metrics unavailable."

  - alert: TooManySilences
    expr: count(ALERTS{alertstate="suppressed"}) > 20
    for: 10m
    labels:
      severity: warning
    annotations:
      summary: "Too many silenced alerts"
      description: "More than 20 alerts suppressed â€” check Alertmanager."
