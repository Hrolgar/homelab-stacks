groups:
- name: node-final
  rules:

  - alert: DiskAlmostFull
    expr: (node_filesystem_avail_bytes / node_filesystem_size_bytes) < 0.10
    for: 10m
    labels:
      severity: critical

  - alert: HighCPUUsage
    expr: avg(rate(node_cpu_seconds_total{mode!="idle"}[5m])) > 0.85
    for: 10m
    labels:
      severity: warning

  - alert: NodeExporterDown
    expr: up{job="node-exporter"} == 0
    for: 2m
    labels:
      severity: critical
